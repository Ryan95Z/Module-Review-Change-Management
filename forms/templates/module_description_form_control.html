{% extends 'core/main.html' %}
{% load core_tags %}
{% load static %}

{% block title %}
    {{ object.pk }}
{% endblock %}

{% block main %}

<div class="row">
<ul class="nav nav-pills">
    <li class="nav-item">
        <a class="nav-link" href="{% url 'change_module_description_structure' %}">Update Form Structure</a>
    </li>
</ul>
</div>

{{ field_formset.management_form }}
<div >
    <table class="table">
        <thead>
            <th scope="col">Order</th>
            <th scope="col">Label</th>
            <th scope="col">Type</th>
            <th scope="col">Choices</th>
            <th scope="col">Default</th>
            <th scope="col">Delete</th>
        </thead>
        <tbody id="form_set">
            {% for form in field_formset.forms %}
            <tr class="form_row">
                <td class="px-1">
                    <span class="row-order">{{ forloop.counter }}</span>
                    {% if forloop.counter0 == 0 %}
                    <button disabled class="btn btn-link p-0 move-up"><i class="fa fa-chevron-up"></i></button>
                    {% else %}
                    <button class="btn btn-link p-0 move-up"><i class="fa fa-chevron-up"></i></button>
                    {% endif %}
                    {% if forloop.counter >= field_formset.forms|length %}
                    <button disabled class="btn btn-link p-0 move-down"><i class="fa fa-chevron-down"></i></button>
                    {% else %}
                    <button class="btn btn-link p-0 move-down"><i class="fa fa-chevron-down"></i></button>
                    {% endif %}
                </td>
                <td class="px-1">{{ form.entity_label|add_css_class:"form-control form-control-sm" }}</td>
                <td class="px-1">{{ form.entity_type|add_css_class:"form-control form-control-sm"}}</td>
                <td class="px-1">{{ form.entity_choices|add_css_class:"form-control form-control-sm"}}</td>
                <td class="px-1">{{ form.entity_default|add_css_class:"form-control form-control-sm"}}</td>
                <td class="px-1"><button class="btn btn-danger btn-sm delete-row"><i class="fa fa-times fa-2"></i></button></td>
                <input type="hidden" name="form-{{ forloop.counter0 }}-entity_order" id="{{form.entity_order.id_for_label}}" value="{{ forloop.counter0 }}">
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<input type="button" class="btn btn-primary btn-sm"value="Add More" id="add_row">
<table style="display:none">
    <tbody id="empty_form">
    <tr class="form_row">
        <td class="px-1">
            <span class="row-order"></span>
            <button class="btn btn-link p-0 move-up"><i class="fa fa-chevron-up"></i></button>
            <button class="btn btn-link p-0 move-down"><i class="fa fa-chevron-down"></i></button>
        </td>
        <td class="px-1">{{ field_formset.empty_form.entity_label|add_css_class:"form-control form-control-sm" }}</td>
        <td class="px-1">{{ field_formset.empty_form.entity_type|add_css_class:"form-control form-control-sm"}}</td>
        <td class="px-1">{{ field_formset.empty_form.entity_choices|add_css_class:"form-control form-control-sm"}}</td>
        <td class="px-1">{{ field_formset.empty_form.entity_default|add_css_class:"form-control form-control-sm"}}</td>
        <td class="px-1"><button class="btn btn-danger btn-sm delete-row"><i class="fa fa-times fa-2"></i></button></td>
        <input type="hidden" name="form-__prefix__-entity_order" id="{{field_formset.empty_form.entity_order.id_for_label}}" value="0">
    </tr>
    </tbody>
</table>

{% endblock %}
{% block scripts %}
<script type="text/javascript" src="{% static 'forms/js/dynamic_formsets.js' %}"></script>
{% endblock %}
