{% extends 'core/main.html' %}
{% load core_tags %}

{% block title %}
	Modules
{% endblock %}

{% block main %}
	<div class="row">
		<div class="col-md-12">
			<h1>Modules <span class="h-sub-action"><a class="btn btn-primary" href="{% url 'new_module' %}">New Module</a></span></h1>
			{% if object_list|length < 1 %}
				<p class="p-msg">There is currently no year tutors</p>
			{% else %}
				<table class="table table-bordered table-dark">
					<thead>
						<tr>
							<th scope="col">Code</th>
							<th scope="col">Name</th>
							<th scope="col">Credits</th>
							<th scope="col">Semester</th>
							<th scope="col">Module Leader</th>
							<th scope="col">Update Module</th>
						</tr>
					</thead>
					<tbody>
					{% for module in object_list %}
						<tr>
							<th scope="row">{{ module.module_code }}</th>
							<td>{{ module.module_name }}</td>
							<td>{{ module.module_credits }} Credits</td>
							<td>{{ module.semester }}</td>
							<td>{{ module.module_leader_name }}</td>
							<td><a class="btn btn-primary btn-sm" href="{% url 'update_module' module.module_code %}">Update {{ module.module_code }}</a></td>
						</tr>
					{% endfor %}
					</tbody>
				</table>
			{% endif %}
		</div>
	</div>

	
	


	{% if is_paginated %}
		{% with k=page_obj.paginator.page_range|range_last_item %}

		{% with range=page_obj.number|page_neighbours2:k %}


			<nav aria-label="Page navigation example">
			  	<ul class="pagination justify-content-center">
			  	{% if page_obj.has_previous %}
			  		<li class="page-item">
	      				<a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
	    			</li>
			  	{% else %}
			  		<li class="page-item disabled">
	      				<a class="page-link" href="#" tabindex="-1">Previous</a>
	    			</li>
	    		{% endif %}

	    		{% if range.0 %}
	    			<li class="page-item"><a class="page-link" href="?page=1">1</a></li>
	    			<li class="page-item disabled">
	      				<a class="page-link" href="#" tabindex="-1">...</a>
	    			</li>
	    		{% endif %}

	    		{% for page in range.2 %}
	    			{% if page_obj.number == page %}
	    				<li class="page-item active">
	      					<a class="page-link" href="#">{{ page }}<span class="sr-only">(current)</span></a>
	    				</li>
	    			{% else %}
	    				<li class="page-item">
	    					<a class="page-link" href="?page={{ page }}">{{ page }}</a>
	    				</li>
	    			{% endif %}
	    		{% endfor %}

	    		{% if range.1 %}
	    			<li class="page-item disabled">
	      				<a class="page-link" href="#" tabindex="-1">...</a>
	    			</li>
	    			
	    			<li class="page-item">
	    				<a class="page-link" href="?page={{ k }}">{{ k }}</a>
	    			</li>
	    			
	    		{% endif %}

			    {% if page_obj.has_next %}
			    	<li class="page-item">
	      				<a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
	    			</li>
			    {% else %}
			  		<li class="page-item disabled">
	      				<a class="page-link" href="#" tabindex="-1">Next</a>
	    			</li>
	    		{% endif %}
			  </ul>
			</nav>
		{% endwith %}
		{% endwith %}
	{% endif %}
{% endblock %}